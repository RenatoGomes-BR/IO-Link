[{"id":"b3b2d606.54b4e8","type":"tab","label":"exe app","disabled":false,"info":""},{"id":"ccb24987.036068","type":"tab","label":"Publisher renato.clg2 - BUS","disabled":true,"info":""},{"id":"d429df56.7ed4e","type":"tab","label":"Publisher renato.clg - master","disabled":true,"info":""},{"id":"43fd34d8.17494c","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"d70acf5c.c918f","type":"ui_group","z":"","name":"Default","tab":"","disp":true,"width":"6","collapse":false},{"id":"c853af64.8c6d","type":"ui_base","theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#097479","value":"#097479","edited":true},"page-titlebar-backgroundColor":{"value":"#097479","edited":false},"page-backgroundColor":{"value":"#111111","edited":false},"page-sidebar-backgroundColor":{"value":"#000000","edited":false},"group-textColor":{"value":"#0eb8c0","edited":false},"group-borderColor":{"value":"#555555","edited":false},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":false},"widget-backgroundColor":{"value":"#097479","edited":false},"widget-borderColor":{"value":"#333333","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"IO-Link Dashboard","hideToolbar":"false","allowSwipe":"true","lockMenu":"true","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"2e44c263.0d16be","type":"ibmiot","z":"","name":"Industry 4.0 Demo case","keepalive":"60","serverName":"52d026.messaging.internetofthings.ibmcloud.com","cleansession":true,"appId":"","shared":false},{"id":"c20f4a48.6e9948","type":"mqtt-broker","z":"","name":"Training 1","broker":"52d026.messaging.internetofthings.ibmcloud.com","port":"1883","clientid":"d:52d026:IO-Link:BAE00T4","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"7c826122.16bbd","type":"ui_tab","z":"","name":"I4.0 Demo case","icon":"fa-user-o","disabled":false,"hidden":false},{"id":"1bf8bf4b.cf9e31","type":"ui_group","z":"","name":"IO-Link Master - Connected Ports","tab":"7c826122.16bbd","order":1,"disp":true,"width":10,"collapse":false},{"id":"57bada62.28b484","type":"ui_group","z":"","name":"Ultrasonic Sensor","tab":"7c826122.16bbd","order":2,"disp":true,"width":"6","collapse":false},{"id":"f4c16371.117f7","type":"mqtt-broker","z":"","name":"Training 2","broker":"x6xkka.messaging.internetofthings.ibmcloud.com","port":"1883","clientid":"d:x6xkka:IO-Link:IO-Link-Master-001","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"3be43732.03db08","type":"ui_group","z":"","name":"Smartlight Control","tab":"3ed67de4.a7c5f2","order":1,"disp":true,"width":"8","collapse":false},{"id":"3ed67de4.a7c5f2","type":"ui_tab","z":"","name":"Overview","icon":"dashboard","order":2,"disabled":false,"hidden":false},{"id":"bf5a8775.1243d8","type":"mqtt-broker","z":"","name":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"999f3430.8d7d58","type":"ui_group","z":"","name":"Raspberry Pi Shutdown","tab":"d2cfc7e8.420008","order":1,"disp":true,"width":"6"},{"id":"d2cfc7e8.420008","type":"ui_tab","z":"","name":"RPi Control","icon":"dashboard","order":19},{"id":"59a31626.8ddda8","type":"ui_group","z":"","name":"Default","tab":"3ed67de4.a7c5f2","order":2,"disp":true,"width":"6","collapse":false},{"id":"a1410a54.b9fb68","type":"inject","z":"d429df56.7ed4e","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":280,"y":660,"wires":[["7e17d50e.6d526c"]]},{"id":"7e17d50e.6d526c","type":"http request","z":"d429df56.7ed4e","name":"","method":"GET","ret":"obj","paytoqs":false,"url":"http://192.168.0.2/dprop.jsn","tls":"","persist":false,"proxy":"","authType":"","x":450,"y":680,"wires":[["dadada0b.3dfae8","f7941d59.dcd6d","ebb9c9ec.a1f618","6fdafd48.5d6e54","b24db95b.03be78","c07ea7db.1c24e8","2e515c77.5ff1e4","504e4ed8.65d1b","c6023734.268ef8","cbf15a05.1242a8"]]},{"id":"dadada0b.3dfae8","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload[0];\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":760,"wires":[["dca001dc.3755f"]]},{"id":"dca001dc.3755f","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload.ProductText;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":760,"wires":[["ea6b0d82.d39e3"]]},{"id":"f7941d59.dcd6d","type":"mqtt out","z":"d429df56.7ed4e","name":"","topic":"iot-2/evt/name/fmt/json","qos":"2","retain":"false","broker":"c20f4a48.6e9948","x":700,"y":680,"wires":[]},{"id":"ea6b0d82.d39e3","type":"ui_text","z":"d429df56.7ed4e","group":"1bf8bf4b.cf9e31","order":1,"width":0,"height":0,"name":"","label":"Port 0 = ","format":"{{msg.payload}}","layout":"row-left","x":920,"y":740,"wires":[]},{"id":"ebb9c9ec.a1f618","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload[1];\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":880,"wires":[["df0181bd.c7888"]]},{"id":"df0181bd.c7888","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload.ProductText;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":880,"wires":[["133dbe4f.f89b22"]]},{"id":"133dbe4f.f89b22","type":"ui_text","z":"d429df56.7ed4e","group":"1bf8bf4b.cf9e31","order":2,"width":0,"height":0,"name":"","label":"Port 1 = ","format":"{{msg.payload}}","layout":"row-left","x":920,"y":880,"wires":[]},{"id":"6fdafd48.5d6e54","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload[2];\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":940,"wires":[["642a3232.36746c"]]},{"id":"642a3232.36746c","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload.ProductText;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":940,"wires":[["7b3c82e2.1d545c"]]},{"id":"7b3c82e2.1d545c","type":"ui_text","z":"d429df56.7ed4e","group":"1bf8bf4b.cf9e31","order":3,"width":0,"height":0,"name":"","label":"Port 2 = ","format":"{{msg.payload}}","layout":"row-left","x":920,"y":940,"wires":[]},{"id":"b24db95b.03be78","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload[3];\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":1000,"wires":[["1dddadaa.3c0752"]]},{"id":"1dddadaa.3c0752","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload.ProductText;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":1000,"wires":[["30cd4d3f.894eb2"]]},{"id":"30cd4d3f.894eb2","type":"ui_text","z":"d429df56.7ed4e","group":"1bf8bf4b.cf9e31","order":4,"width":0,"height":0,"name":"","label":"Port 3 = ","format":"{{msg.payload}}","layout":"row-left","x":920,"y":1000,"wires":[]},{"id":"c07ea7db.1c24e8","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload[4];\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":1060,"wires":[["98767ad1.f35a38"]]},{"id":"98767ad1.f35a38","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload.ProductText;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":1060,"wires":[["8d600dab.4498f"]]},{"id":"8d600dab.4498f","type":"ui_text","z":"d429df56.7ed4e","group":"1bf8bf4b.cf9e31","order":5,"width":0,"height":0,"name":"","label":"Port 4 = ","format":"{{msg.payload}}","layout":"row-left","x":920,"y":1060,"wires":[]},{"id":"2e515c77.5ff1e4","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload[5];\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":1120,"wires":[["39ade536.001d0a"]]},{"id":"39ade536.001d0a","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload.ProductText;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":1120,"wires":[["238a62c.85f089e"]]},{"id":"238a62c.85f089e","type":"ui_text","z":"d429df56.7ed4e","group":"1bf8bf4b.cf9e31","order":6,"width":0,"height":0,"name":"","label":"Port 5 = ","format":"{{msg.payload}}","layout":"row-left","x":920,"y":1120,"wires":[]},{"id":"504e4ed8.65d1b","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload[6];\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":1180,"wires":[["7290f842.59e228"]]},{"id":"7290f842.59e228","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload.ProductText;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":1180,"wires":[["2d64a820.46bb48"]]},{"id":"2d64a820.46bb48","type":"ui_text","z":"d429df56.7ed4e","group":"1bf8bf4b.cf9e31","order":7,"width":0,"height":0,"name":"","label":"Port 6 = ","format":"{{msg.payload}}","layout":"row-left","x":920,"y":1180,"wires":[]},{"id":"c6023734.268ef8","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload[7];\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":1240,"wires":[["b1a1c0b5.dcb27"]]},{"id":"b1a1c0b5.dcb27","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload.ProductText;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":1240,"wires":[["7f74c812.2e9408"]]},{"id":"7f74c812.2e9408","type":"ui_text","z":"d429df56.7ed4e","group":"1bf8bf4b.cf9e31","order":8,"width":0,"height":0,"name":"","label":"Port 7 = ","format":"{{msg.payload}}","layout":"row-left","x":920,"y":1240,"wires":[]},{"id":"b6eaecf0.c81b5","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload.ProcessInputs;\nreturn msg;","outputs":1,"noerr":0,"x":130,"y":1020,"wires":[["18e2e8cc.d9de17"]]},{"id":"cbf15a05.1242a8","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload[4];\nreturn msg;","outputs":1,"noerr":0,"x":110,"y":840,"wires":[["b6eaecf0.c81b5","352de090.7521c"]]},{"id":"18e2e8cc.d9de17","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload = msg.payload.split(' ').map(function(hex){ return parseInt(hex, 16); });\nreturn msg;","outputs":1,"noerr":0,"x":170,"y":1180,"wires":[["7b292d82.37bfc4"]]},{"id":"a312ece0.5f5c5","type":"debug","z":"d429df56.7ed4e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":370,"y":860,"wires":[]},{"id":"7b292d82.37bfc4","type":"ui_gauge","z":"d429df56.7ed4e","name":"","group":"57bada62.28b484","order":2,"width":0,"height":0,"gtype":"wave","title":"Distance","label":"mm","format":"{{value}}","min":0,"max":"30","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":340,"y":1180,"wires":[]},{"id":"9d1d3a4.cb2bac8","type":"ui_text","z":"d429df56.7ed4e","group":"57bada62.28b484","order":1,"width":0,"height":0,"name":"","label":"Model","format":"{{msg.payload}}","layout":"col-center","x":320,"y":1120,"wires":[]},{"id":"352de090.7521c","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload.ProductId;\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":980,"wires":[["9d1d3a4.cb2bac8","a312ece0.5f5c5"]]},{"id":"f6aa1f94.b5bb7","type":"inject","z":"ccb24987.036068","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":140,"wires":[["682d3157.ed323"]]},{"id":"682d3157.ed323","type":"http request","z":"ccb24987.036068","name":"","method":"GET","ret":"obj","paytoqs":false,"url":"http://192.168.0.2/dprop.jsn","tls":"","persist":false,"proxy":"","authType":"","x":450,"y":140,"wires":[["a49f7644.2345a8","7d263be5.940e34","b258fc5a.0ce28"]]},{"id":"b258fc5a.0ce28","type":"debug","z":"ccb24987.036068","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1210,"y":260,"wires":[]},{"id":"3ed70bca.068094","type":"inject","z":"d429df56.7ed4e","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":220,"y":1400,"wires":[["c7b25096.b4104"]]},{"id":"c7b25096.b4104","type":"http request","z":"d429df56.7ed4e","name":"","method":"GET","ret":"obj","paytoqs":false,"url":"http://192.168.0.2/dprop.jsn","tls":"","persist":false,"proxy":"","authType":"","x":430,"y":1400,"wires":[["faa1f699.4d1998"]]},{"id":"d99d5042.1751e","type":"debug","z":"d429df56.7ed4e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":650,"y":1400,"wires":[]},{"id":"45db4eb8.a2a73","type":"function","z":"d429df56.7ed4e","name":"Convert Hex-Strings to [hex,dec,bit]","func":"var output1 = {};  //define output\nvar output2 = {};  //define output\nvar output3 = {};  //define output\n\nvar hex = msg.payload.replace(/ /g, \"\");\nvar dec = parseInt(hex,16);\n\n//no leading zeroeswith this method\n//var bit = parseInt(hex,16).toString(2);\n\nvar bit\n\nfunction hexToBinary(s) {\n    var i, k, part, ret = '';\n    // lookup table for easier conversion. '0' characters are padded for '1' to '7'\n    var lookupTable = {\n        '0': '0000', '1': '0001', '2': '0010', '3': '0011', '4': '0100',\n        '5': '0101', '6': '0110', '7': '0111', '8': '1000', '9': '1001',\n        'a': '1010', 'b': '1011', 'c': '1100', 'd': '1101',\n        'e': '1110', 'f': '1111',\n        'A': '1010', 'B': '1011', 'C': '1100', 'D': '1101',\n        'E': '1110', 'F': '1111'\n    };\n    for (i = 0; i < s.length; i += 1) {\n        if (lookupTable.hasOwnProperty(s[i])) {\n            ret += lookupTable[s[i]];\n        } else {\n            return { valid: false };\n        }\n    }\n    return { valid: true, result: ret };\n}\n\nbit=hexToBinary(hex);\n\noutput1.payload=hex;\noutput2.payload=dec;\noutput3.payload=bit.result;\n\nreturn [output1,output2,output3];\n","outputs":3,"noerr":0,"x":500,"y":1640,"wires":[[],[],["f3d93edf.4b02f"]],"inputLabels":["Hex string"],"outputLabels":["Hex string (no spaces)","Decimal value","Binary string"]},{"id":"f3d93edf.4b02f","type":"function","z":"d429df56.7ed4e","name":"Calculate and prepare \"real life\" values BUS","func":"//cut out all bits that contain data\n//substr(0, 2) means: Cut at position \"0\" the next \"2\"\nvar sub = msg.payload.substr(0, 15);\nvar subIN;\n\n//convert the bitstring to a decimal number\nsubIN=parseInt(sub,2);\n\n//define the decimal max value of the sensor\nvar maxvalue=13000;\n\n//name the values and calculate them (%)\nmsg.topic=\"Ultrasonic Position\";\nmsg.payload=(subIN/maxvalue)*1300;\n//If you want to scale to e.g. liters, change 100 to the maximum value\n\n//end the function\nreturn msg;\n","outputs":"1","noerr":0,"x":890,"y":1640,"wires":[[]]},{"id":"faa1f699.4d1998","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload[4];\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":1520,"wires":[[]]},{"id":"7fdd30ed.cc1b2","type":"function","z":"d429df56.7ed4e","name":"","func":"msg.payload=msg.payload.ProcessInputs;\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":1540,"wires":[[]]},{"id":"a49f7644.2345a8","type":"function","z":"ccb24987.036068","name":"","func":"msg.payload=msg.payload[4];\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":140,"wires":[["a42a02ff.2c29b"]]},{"id":"a42a02ff.2c29b","type":"function","z":"ccb24987.036068","name":"","func":"msg.payload=msg.payload.ProcessInputs;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":140,"wires":[["3be99c77.7de7d4"]]},{"id":"3be99c77.7de7d4","type":"function","z":"ccb24987.036068","name":"Convert Hex-Strings to [hex,dec,bit]","func":"var output1 = {};  //define output\nvar output2 = {};  //define output\nvar output3 = {};  //define output\n\nvar hex = msg.payload.replace(/ /g, \"\");\nvar dec = parseInt(hex,16);\n\n//no leading zeroeswith this method\n//var bit = parseInt(hex,16).toString(2);\n\nvar bit\n\nfunction hexToBinary(s) {\n    var i, k, part, ret = '';\n    // lookup table for easier conversion. '0' characters are padded for '1' to '7'\n    var lookupTable = {\n        '0': '0000', '1': '0001', '2': '0010', '3': '0011', '4': '0100',\n        '5': '0101', '6': '0110', '7': '0111', '8': '1000', '9': '1001',\n        'a': '1010', 'b': '1011', 'c': '1100', 'd': '1101',\n        'e': '1110', 'f': '1111',\n        'A': '1010', 'B': '1011', 'C': '1100', 'D': '1101',\n        'E': '1110', 'F': '1111'\n    };\n    for (i = 0; i < s.length; i += 1) {\n        if (lookupTable.hasOwnProperty(s[i])) {\n            ret += lookupTable[s[i]];\n        } else {\n            return { valid: false };\n        }\n    }\n    return { valid: true, result: ret };\n}\n\nbit=hexToBinary(hex);\n\noutput1.payload=hex;\noutput2.payload=dec;\noutput3.payload=bit.result;\n\nreturn [output1,output2,output3];\n","outputs":3,"noerr":0,"x":460,"y":260,"wires":[[],[],["b4477a57.550ee8"]]},{"id":"b4477a57.550ee8","type":"function","z":"ccb24987.036068","name":"Calculate and prepare \"real life\" values BUS","func":"//cut out all bits that contain data\n//substr(0, 2) means: Cut at position \"0\" the next \"2\"\nvar sub = msg.payload.substr(0, 15);\nvar subIN;\n\n//convert the bitstring to a decimal number\nsubIN=parseInt(sub,2);\n\n//define the decimal max value of the sensor\nvar maxvalue=13000;\n\n//name the values and calculate them (%)\nmsg.topic=\"Ultrasonic Position\";\nmsg.payload=(subIN/maxvalue)*1300;\n//If you want to scale to e.g. liters, change 100 to the maximum value\n\n//end the function\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":260,"wires":[["b258fc5a.0ce28"]]},{"id":"7d263be5.940e34","type":"mqtt out","z":"ccb24987.036068","d":true,"name":"Publisher","topic":"iot-2/evt/name/fmt/json","qos":"2","retain":"false","broker":"f4c16371.117f7","x":620,"y":60,"wires":[]},{"id":"c6f4941f.646d68","type":"inject","z":"b3b2d606.54b4e8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":200,"y":140,"wires":[[]]},{"id":"2a974323.60cabc","type":"http request","z":"b3b2d606.54b4e8","name":"","method":"GET","ret":"obj","paytoqs":false,"url":"http://192.168.0.2/dprop.jsn","tls":"","persist":false,"proxy":"","authType":"","x":410,"y":140,"wires":[[]]},{"id":"86c548d5.c70e58","type":"switch","z":"b3b2d606.54b4e8","name":"Condition switching","property":"write","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":770,"y":240,"wires":[["863dd7f8.eac228"],["db0f2403.8f95c8"]]},{"id":"5c7f53e0.fd9cdc","type":"inject","z":"b3b2d606.54b4e8","name":"","topic":"","payload":"\"11 01 F4 AA\"","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":210,"y":200,"wires":[[]]},{"id":"db0f2403.8f95c8","type":"debug","z":"b3b2d606.54b4e8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1190,"y":260,"wires":[]},{"id":"7d3797f5.120f98","type":"function","z":"b3b2d606.54b4e8","name":"","func":"bodval = msg.payload.replace(/\\s/g,''); // removing spaces\nmsg.payload = parseInt(bodval.slice(2,6), 16); // converting from nibble 2 size 6 nibbles\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":240,"wires":[["b089340e.b4c458","c58c9f2c.5ac13"]]},{"id":"ca8c5ed9.9eeff","type":"function","z":"b3b2d606.54b4e8","name":"","func":"bodval = (msg.payload[0].processInputs).replace(/\\s/g,''); // removing spaces\nmsg.payload = parseInt(bodval.slice(2,6), 16);\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":140,"wires":[[]]},{"id":"b089340e.b4c458","type":"function","z":"b3b2d606.54b4e8","name":"","func":"if (msg.payload <= 6000) {\n    time = new Date();\n    msg.payload = {Value: msg.payload, Time: time.toString()};\n    msg.write = 1;\n} else {\n    msg.payload = msg.payload;\n    msg.write = 0;\n}\nreturn msg;","outputs":1,"noerr":0,"x":590,"y":240,"wires":[["86c548d5.c70e58"]]},{"id":"863dd7f8.eac228","type":"excel","z":"b3b2d606.54b4e8","name":"","file":"C:\\Users\\gomesr\\Desktop\\Datalog.xlsx","x":990,"y":200,"wires":[["d5a147c6.55dd48"]]},{"id":"d5a147c6.55dd48","type":"debug","z":"b3b2d606.54b4e8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1180,"y":200,"wires":[]},{"id":"c58c9f2c.5ac13","type":"ui_chart","z":"b3b2d606.54b4e8","name":"","group":"57bada62.28b484","order":2,"width":0,"height":0,"label":"Distance","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"6000","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"60","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"outputs":1,"x":1190,"y":340,"wires":[[]]},{"id":"e560e9ea.b51158","type":"ui_button","z":"b3b2d606.54b4e8","name":"","group":"57bada62.28b484","order":3,"width":0,"height":0,"passthru":false,"label":"button","tooltip":"","color":"","bgcolor":"","icon":"","payload":"\"11 01 F4 AA\"","payloadType":"json","topic":"","x":170,"y":260,"wires":[["7d3797f5.120f98"]]},{"id":"27af060f.5f11fa","type":"ui_switch","z":"b3b2d606.54b4e8","name":"","label":"switch","tooltip":"","group":"57bada62.28b484","order":4,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":170,"y":80,"wires":[["2a974323.60cabc"]]}]